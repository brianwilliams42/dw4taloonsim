<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Taloon Chapter 3 Money Simulator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="layout">
      <section class="panel">
        <h1>Taloon Chapter 3 Money Simulator</h1>
        <p class="repo-link">
          <a href="https://github.com/brianwilliams42/dw4taloonsim">Link to GitHub</a>
        </p>
        <p class="intro">
          Explore different iron plate sale thresholds and shop strategies to see how they
          affect the time needed to reach Taloon's Chapter 3 gold goals. Configure the inputs
          below, then run the Monte Carlo simulation.
        </p>
        <form id="sim-form" class="form-grid">
          <div class="actions actions-top">
            <button type="submit" id="run-btn">Run simulation</button>
            <button type="reset" id="reset-btn" class="secondary">Reset defaults</button>
          </div>
          <fieldset>
            <legend>Phase breakpoints</legend>
            <label
              class="field"
              title="Gold Taloon has on hand when the simulation begins, with Taloon in Endor."
            >
              <span>Starting gold</span>
              <input id="start-gold" name="start-gold" type="number" min="1" required />
            </label>
            <label
              class="field"
              title="Gold needed to stop selling to the armor merchant and immediately buy the shop."
            >
              <span>Gold to stop selling and buy shop</span>
              <input id="min-shop-gold" name="min-shop-gold" type="number" min="1" required />
            </label>
            <label class="field" title="Target amount of gold after Neta finishes selling the inventory.">
              <span>Final gold target after Neta sells</span>
              <input id="final-target" name="final-target" type="number" min="1" required />
            </label>
          </fieldset>

          <fieldset>
            <legend>Simulation controls</legend>
            <label class="field" title="Sale price thresholds that determine when Taloon accepts an armor offer. Separate multiple values with commas.">
              <span>Armor offer thresholds (comma separated)</span>
              <input id="thresholds" name="thresholds" type="text" required />
            </label>
            <label class="field" title="Number of nights Taloon sleeps before checking back on Neta's sales.">
              <span>Nights to sleep between profit collections</span>
              <input id="nights" name="nights" type="number" min="1" required />
            </label>
            <label
              class="field"
              title="If Taloon delivers at most this many items in a loop, he only sleeps twice before returning. Leave blank to always use the default nights."
            >
              <span>Two-sleep item threshold (optional)</span>
              <input
                id="two-sleep-threshold"
                name="two-sleep-threshold"
                type="number"
                min="0"
                placeholder="Leave blank for none"
              />
            </label>
            <label
              class="field"
              title="If Taloon delivers at most this many items in a loop, he only sleeps once before returning. Leave blank to always use the default nights."
            >
              <span>One-sleep item threshold (optional)</span>
              <input
                id="one-sleep-threshold"
                name="one-sleep-threshold"
                type="number"
                min="0"
                placeholder="Leave blank for none"
              />
            </label>
            <label class="field" title="How many Monte Carlo runs to perform for each threshold value.">
              <span>Monte Carlo runs per threshold</span>
              <input id="runs" name="runs" type="number" min="1" required />
            </label>
            <label
              class="field"
              title="Leave blank for exactly one shopping trip. Otherwise Taloon makes a second trip if he has at least this much gold after the first trip."
            >
              <span>Additional trip cutoff (optional)</span>
              <input id="trip-cutoff" name="trip-cutoff" type="number" min="0" placeholder="Leave blank for none" />
            </label>
            <label class="field" title="Provide a deterministic random seed value. Leave blank for a different random sequence each run.">
              <span>Random seed (optional)</span>
              <input id="seed" name="seed" type="number" placeholder="Random each run" />
            </label>
            <label class="field" title="Choose how Taloon plans his shopping trips when stocking Neta.">
              <span>Purchase strategy</span>
              <select id="purchase-strategy" name="purchase-strategy">
                <option value="greedy">Greedy (buy priciest items first)</option>
                <option value="max-spend">Maximize total spend</option>
                <option value="abacus-greedy">Abacus-aware greedy</option>
              </select>
            </label>
            <label
              class="field"
              title="When using the abacus-aware strategy, require at least this many Abacus of Virtue purchases before skipping cheaper items."
            >
              <span>Abacus count threshold (abacus strategy)</span>
              <input
                id="abacus-count-threshold"
                name="abacus-count-threshold"
                type="number"
                min="0"
                placeholder="Enter count when using abacus strategy"
              />
            </label>
            <label
              class="field"
              title="When using the abacus-aware strategy, ignore shop items cheaper than this gold amount once the abacus count condition is met."
            >
              <span>Abacus price cutoff (abacus strategy)</span>
              <input
                id="abacus-price-cutoff"
                name="abacus-price-cutoff"
                type="number"
                min="0"
                placeholder="Enter gold cutoff when using abacus strategy"
              />
            </label>
          </fieldset>
        </form>
        <p id="threshold-hint" class="hint"></p>
        <p id="status" aria-live="polite" class="status"></p>
      </section>

      <section class="panel results" aria-live="polite">
        <h2>Results</h2>
        <div id="results"></div>
      </section>
    </main>
    <script src="app.js" type="module"></script>
  </body>
</html>
